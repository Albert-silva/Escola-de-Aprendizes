{"remainingRequest":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/albert/Documents/Escola-de-Aprendizes/front-vue/src/pages/AlunoConteudo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/src/pages/AlunoConteudo.vue","mtime":1669938477991},{"path":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/albert/Documents/Escola-de-Aprendizes/front-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDb250ZXVkb1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQ29udGV1ZG8iOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQXV0aCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgICAgICAgZmluaXNoOiBmYWxzZSwKICAgICAgICAgICAgaWRfY29udGV1ZG86ICcnLAogICAgICAgICAgICBudW1iZXJSdWxlczogWwogICAgICAgICAgICAgICAgdiA9PiAhIXYgfHwgJ0lkIGRvIGFsdW5vIGUgZG8gY29udGV1ZG8gc8OjbyBvYnJpZ2F0w7NyaW9zJwogICAgICAgICAgICBdLAogICAgICAgICAgICAKICAgICAgICAgICAgYWx1bm9fc2VsZWNpb25hZG86IG51bGwsCiAgICAgICAgICAgIHRvZG9zX2FsdW5vczogW10sCiAgICAgICAgICAgIAogICAgICAgICAgICBjb250ZXVkb19zZWxlY2lvbmFkbzogbnVsbCwKICAgICAgICAgICAgdG9kb3NfY29udGV1ZG9zOiBbXQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIC8vIHBlZ2FyIGEgbGlzdGEgZGUgYWx1bm9zIGRpc3Bvbml2ZWlzCiAgICAgICAgdGhpcy5nZXRBbHVub3MoKTsKICAgICAgICAvLyBwZWdhciBhIGxpc3RhIGRlIGNvbnRldWRvcyBkaXNwb25pdmVpcwogICAgICAgIHRoaXMuZ2V0Q29udGV1ZG8oKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgYXN5bmMgZ2V0QWx1bm9zKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBdXRoU2VydmljZS5nZXRBbHVub3MoKTsKICAgICAgICAgICAgICAgIHRoaXMudG9kb3NfYWx1bm9zID0gcmVzcG9uc2UuZGF0YS51c2Vyc19saXN0Lm1hcCh1c2VyID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAnaWQnOiB1c2VyLmlkLAogICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6IHVzZXIuTm9tZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgfSBjYXRjaChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGdldENvbnRldWRvKCkgewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBDb250ZXVkb1NlcnZpY2UuZ2V0QWxsKCk7CiAgICAgICAgICAgICAgICB0aGlzLnRvZG9zX2NvbnRldWRvcyA9IHJlc3BvbnNlLmRhdGEuY29udGV1ZG9zLm1hcChjb250ZXVkbyA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2lkJzogY29udGV1ZG8uaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogY29udGV1ZG8ubm9tZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICB9IGNhdGNoKGVycikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgYXN5bmMgY3JpYWFsdW5vY29udGV1ZG8oKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgIGlkX2FsdW5vOiB0aGlzLmFsdW5vX3NlbGVjaW9uYWRvLmlkLAogICAgICAgICAgICAgICAgICAgIGlkX2NvbnRldWRvOiB0aGlzLmlkX2NvbnRldWRvCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBhd2FpdCBDb250ZXVkb1NlcnZpY2UuYWx1bm9jb250ZXVkbyhkYXRhKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgdGhpcy5maW5pc2ggPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvZGFzaC9jb250ZXVkbyd9KTsKICAgICAgICAgICAgICAgIH0sIDUwMDApOwogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKTsKICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["AlunoConteudo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AlunoConteudo.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n    <div>\n        <h1>Adicione um aluno a um conteúdo</h1>\n\n        <v-alert v-if=\"finish\" shaped outlined type=\"success\" style=\" margin: 20px\">\n            Aluno adicionado a conteudo com sucesso! Você será redirecionada para a pagina de listagem...\n        </v-alert>\n\n        <v-form ref=\"form\" v-model=\"valid\" lazy-validation\n            style=\"background: #FFF; border-radius: 5px; padding: 20px; margin: 20px\">\n\n            <v-select v-model=\"aluno_selecionado\" label=\"Aluno\" :items=\"todos_alunos\" item-text=\"name\" item-value=\"id\" return-object outlined></v-select>\n            <v-select v-model=\"conteudo_selecionado\" label=\"Conteudo\" :items=\"todos_conteudos\" item-text=\"name\" item-value=\"id\" return-object outlined></v-select>\n\n            <v-btn :disabled=\"!valid\" color=\"success\" class=\"mr-4\" @click=\"criaalunoconteudo\">\n                Adicionar\n            </v-btn>\n\n            <v-btn color=\"error\" class=\"mr-4\" @click=\"reset\">\n                Limpar\n            </v-btn>\n        </v-form>\n\n        {{todos_conteudos}}\n    </div>\n</template>\n\n<script>\nimport ConteudoService from \"../services/Conteudo\";\nimport AuthService from \"../services/Auth\";\n\nexport default {\n    data() {\n        return {\n            valid: false,\n            finish: false,\n            id_conteudo: '',\n            numberRules: [\n                v => !!v || 'Id do aluno e do conteudo são obrigatórios'\n            ],\n            \n            aluno_selecionado: null,\n            todos_alunos: [],\n            \n            conteudo_selecionado: null,\n            todos_conteudos: []\n        }\n    },\n    mounted() {\n        // pegar a lista de alunos disponiveis\n        this.getAlunos();\n        // pegar a lista de conteudos disponiveis\n        this.getConteudo();\n    },\n    methods: {\n        async getAlunos() {\n            try {\n                const response = await AuthService.getAlunos();\n                this.todos_alunos = response.data.users_list.map(user => {\n                    return {\n                        'id': user.id,\n                        'name': user.Nome\n                    }\n                });\n\n            } catch(err) {\n                console.log(err);\n            }\n        },\n        async getConteudo() {\n            try {\n                const response = await ConteudoService.getAll();\n                this.todos_conteudos = response.data.conteudos.map(conteudo => {\n                    return {\n                        'id': conteudo.id,\n                        'name': conteudo.nome\n                    }\n                })\n\n            } catch(err) {\n                console.log(err);\n            }\n        },\n        async criaalunoconteudo() {\n            try {\n                const data = {\n                    id_aluno: this.aluno_selecionado.id,\n                    id_conteudo: this.id_conteudo\n                }\n                await ConteudoService.alunoconteudo(data);\n                \n                this.finish = true;\n                this.reset();\n                setTimeout(() => {\n                    this.$router.push({path: '/dash/conteudo'});\n                }, 5000);\n            } catch (err) {\n                console.log(err);\n            }\n        },\n        reset() {\n            this.$refs.form.reset();\n        },\n    }\n}\n</script>"]}]}